{% extends "allauth/layouts/manage.html" %}
{% load static allauth i18n %}

{% block head_title %}{{ view_title }}{% endblock %}

{% block content %}
<div class="mx-md-5 my-5">
    <div class="row justify-content-center">
        <div class="col-md-8 col-lg-6">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white text-center">
                    <h3 class="mb-0">{{ view_title }}</h3>
                </div>
                <div class="card-body">
                    <form method="post">
                        {% csrf_token %}

                        {% if form.type %}
                        <div class="mb-3">
                            <label for="{{ form.type.id_for_label }}" class="form-label">{% trans "Offer Type" %}</label>
                            {{ form.type }}
                            {% if form.type.errors %}
                                <div class="invalid-feedback d-block">{{ form.type.errors|join:", " }}</div>
                            {% endif %}
                        </div>
                        {% endif %}

                        {% if form.amount %}
                        <div class="mb-3">
                            <label for="{{ form.amount.id_for_label }}" class="form-label">{% trans "Amount" %}</label>
                            {{ form.amount }}
                            {% if form.amount.errors %}
                                <div class="invalid-feedback d-block">{{ form.amount.errors|join:", " }}</div>
                            {% endif %}
                        </div>
                        {% endif %}

                        {% if form.currency %}
                        <div class="mb-3">
                            <label for="{{ form.currency.id_for_label }}" class="form-label">{% trans "Currency" %}</label>
                             {{ form.currency }}
                            {% if form.currency.errors %}
                                <div class="invalid-feedback d-block">{{ form.currency.errors|join:", " }}</div>
                            {% endif %}
                        </div>
                        {% endif %}

                        {% if form.deadline %}
                        <div class="mb-3">
                            <label for="{{ form.deadline.id_for_label }}" class="form-label">{% trans "Deadline" %}</label>
                            {{ form.deadline }} {# Widget now includes type="datetime-local" #}
                            {% if form.deadline.errors %}
                                <div class="invalid-feedback d-block">{{ form.deadline.errors|join:", " }}</div>
                            {% endif %}
                            <small class="form-text text-muted">{% trans "Please use your local time." %}</small>
                        </div>
                        {% endif %}

                        {% if form.status %}
                        <div class="mb-3">
                            <label for="{{ form.status.id_for_label }}" class="form-label">{% trans "Status" %}</label>
                             {{ form.status }}
                            {% if form.status.errors %}
                                <div class="invalid-feedback d-block">{{ form.status.errors|join:", " }}</div>
                            {% endif %}
                        </div>
                        {% endif %}

                        {% if form.urgent %}
                        <div class="mb-3 form-check">
                             {{ form.urgent }}
                            <label for="{{ form.urgent.id_for_label }}" class="form-check-label">{% trans "Urgent" %}</label>
                            {% if form.urgent.errors %}
                                <div class="invalid-feedback d-block">{{ form.urgent.errors|join:", " }}</div>
                            {% endif %}
                        </div>
                        {% endif %}

                        {% if form.hide_contacts %}
                        <div class="mb-3 form-check">
                           {{ form.hide_contacts }}
                           <label for="{{ form.hide_contacts.id_for_label }}" class="form-check-label">{% trans "Hide Contacts" %}</label>
                            {% if form.hide_contacts.errors %}
                                <div class="invalid-feedback d-block">{{ form.hide_contacts.errors|join:", " }}</div>
                            {% endif %}
                            <small class="form-text text-muted d-block">{% trans "If checked, your contact info won't be shown until you start a conversation." %}</small>
                        </div>
                        {% endif %}

                        {% if form.conditions %}
                        <div class="mb-3">
                            <label for="{{ form.conditions.id_for_label }}" class="form-label">{% trans "Conditions" %}</label>
                             {{ form.conditions }}
                            {% if form.conditions.errors %}
                                <div class="invalid-feedback d-block">{{ form.conditions.errors|join:", " }}</div>
                            {% endif %}
                             <small class="form-text text-muted">{% trans "Optional: Specify any conditions for the exchange." %}</small>
                        </div>
                        {% endif %}

                        <div class="d-grid">
                            <button type="submit" class="btn btn-primary">{{ submit_button_text }}</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}